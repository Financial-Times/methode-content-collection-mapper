consumer:
  jerseyClient:
    connectionTimeout: 2 seconds
    timeout: 25 seconds
  messageConsumer:
    queueProxyHost: http://localhost:8080
    queue: kafka
    topicName: NativeCmsPublicationEvents
    groupName: MethodeContentCollectionMapper
    backoffPeriod: 10000
    streamCount: 1
    autoCommit: true
    offsetReset: largest
  healthCheck:
    name: Can connect consumer to kafka-proxy
    severity: 2
    businessImpact: Newly published Methode Content Collections will not be available from the Content API
    technicalSummary: Tests that kafka-proxy is reachable and message can be consumed
    panicGuideUrl: https://dewey.ft.com/kafka-proxy.html
  systemCode: methode-web-pub
  
producer:
  jerseyClient:
    connectionTimeout: 2 seconds
    timeout: 25 seconds
  messageProducer:
    proxyHostAndPort: localhost:8080
    additionalHeaders:
      Host: kafka
    topicName: CmsPublicationEvents
  healthCheck:
    name: Can connect producer to kafka-proxy
    severity: 2
    businessImpact: Newly published Methode Content Collections will not be available from the Content API
    technicalSummary: Tests that kafka-proxy is reachable and the CmsPublicationEvents topic exists
    panicGuideUrl: https://dewey.ft.com/kafka-proxy.html

contentUriPrefix: http://methode-content-collection-mapper.svc.ft.com/content-collection/

documentStoreApi:
    numberOfConnectionAttempts: 3
    timeoutMultiplier: 1000
    endpointConfiguration:
        shortName: "document-store-api"
        jerseyClient:
            timeout: 5000ms
        primaryNodes: ["localhost:8080"]
        secondaryNodes: null
        resilienceStrategy: LOAD_BALANCED_IP_STRATEGY
    hostHeader: "document-store-api"
    healthCheck:
        name: Can connect document-store-api
        severity: 2
        businessImpact: Newly published Methode Content Collections containing internal placeholders will not be available from the Content API
        panicGuideUrl: https://dewey.ft.com/document-store-api.html
        technicalSummary: Tests that document-store-api is reachable and good-to-go.

validationConfiguration:
    authorityPrefix: http://api.ft.com/system/
    brandIdMappings:
        blogs.ft.com/the-world: FT-LABS-WP-1-2
        blogs.ft.com/westminster: FT-LABS-WP-1-12
        ftalphaville.ft.com: FT-LABS-WP-1-24
        www.ft.com/fastft: FT-LABS-WP-1-335

server:
  applicationConnectors:
    - type: http
      port: 16080

  adminConnectors:
    - type: http
      port: 16081

  requestLog:
    appenders:
      - type: console
        # The timezone used to format dates. HINT: USE THE DEFAULT, UTC.
        timeZone: UTC

logging:
  level: INFO
  loggers:
    io.dropwizard: DEBUG
  appenders:
    - type: console
      logFormat: "%-5p [%d{ISO8601, GMT}] %c: %X{transaction_id} %m [%thread]%n%xEx"

appInfo:
  systemCode: "upp-mccm"
  description: "Methode Content Collection Mapper (MCCM) is responsible for listening to new content collection publishes (i.e. content package or story package) on the kafka NativeCMSPublicationEvents queue, and then transforming them into UPP format and then writing them to kafka CMSPublicationEvents queue."
